<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../static/layui/css/layui.css">
    <link rel="stylesheet" href="../static/layui/space.3.98e2ebbf40cd5cc7ab0f9fd3e1cfbaae44f79b97.css">
</head>
<body>
<ul class="layui-nav">
    <li class="layui-nav-item"><a href="personcenter.html">主页</a></li>
    <li class="layui-nav-item"><a href="personalcenter_submit.html">投稿</a></li>
    <li class="layui-nav-item"><a href="personalcenter_collect.html">收藏<span class="layui-badge">1</span></a></li>

    <li class="layui-nav-item"><a href="viewhistory.html">历史纪录</a></li>
    <li class="layui-nav-item"><a href="edit.html">编辑个人资料</a></li>


    <li class="layui-nav-normol" style="float:right"><a href="fans.html">粉丝</a></li>
    <li class="layui-nav-normol" style="float:right"><a href="focus.html">关注</a></li>

</ul>


<div class="s-space">
    <div>
        <div class="wrapper" id="page-video">
            <div class="col-full clearfix">
                <div class="fav-main section"></div>


                <div class="layui-container">
                    <div class="layui-row" id="Reset3">
                        <div class="layui-col-md3">

                            <ul class="layui-nav layui-nav-tree layui-inline" style="margin-right: 10px;"
                                lay-filter="demo">
                                <li class="layui-nav-item layui-nav-itemed"><a href="focus.html">我的关注</a></li>
                                <li class="layui-nav-item layui-nav-itemed"><a href="fans.html">我的粉丝</a></li>
                            </ul>

                        </div>

                        <div class="layui-col-md9">


                            <div class="follow-header follow-header-info">
                                <div class="breadcrumb clearfix"><p class="item cur">我的关注</p><!----></div><!----></div>


                            <div class="fav-main section"></div>

                            <div class="follow-content section">
                                <div class="content"  style="padding-bottom: 10px;">

                                    <ul class="relation-list">

                                        <li class="list-item clearfix">
                                            <div class="content">
                                                <img src="../b2b6f3c65ff0fe374d261003ab63c97a1cb5c4ed.jpg" class="layui-nav-img ">
                                                <p style="font-size:20px" >小伟-MAX</p>
                                                <button class="layui-btn layui-btn-disabled layui-btn-xs" style="float:right">已关注</button>
                                                <p class="desc">三连一时爽 一直按 一直爽～网易云账号:小伟-MAX 可以去隔壁点个关注哦～ </p>
                                            </div>
                                        </li>

                                        <li class="list-item clearfix">
                                            <div class="content">
                                                <img src="../b2b6f3c65ff0fe374d261003ab63c97a1cb5c4ed.jpg" class="layui-nav-img ">
                                                <p style="font-size:20px" >别把我逮住了</p>
                                                <button class="layui-btn layui-btn-disabled layui-btn-xs" style="float:right">已关注</button>
                                                <p class="desc">宁配吗</p>
                                            </div>
                                        </li>


                                    </ul>




                                </div>

                            </div>


                        </div>
                    </div>


                </div>











            </div>
        </div>
    </div>
</div>


<div style="margin-top: 15px;">

    <!-- 示例-970 -->
    <ins class="adsbygoogle" style="display:inline-block;width:970px;height:90px" data-ad-slot="3820120620"
         data-ad-client="ca-pub-6111334333458862"></ins>

</div>
<div style="margin-top: 15px;">

    <!-- 示例-970 -->
    <ins class="adsbygoogle" style="display:inline-block;width:970px;height:90px" data-ad-slot="3820120620"
         data-ad-client="ca-pub-6111334333458862"></ins>

</div>
<!-- jQuery 3 -->
<script src="../static/bower_components/jquery/dist/jquery.min.js"></script>

<script src="https://cdn.staticfile.org/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="../static/plugins/sweetalert/sweetalert.min.js"></script>
<link rel="stylesheet" type="text/css" href="../static/plugins/sweetalert/sweetalert.css">
<script type="text/javascript" src="../static/resources/js/login.js?v=20175131017 "></script>
<link href="../static/resources/css/login.css" rel="stylesheet" type="text/css"/>



<script src="../static/layui/layui.js"></script>
<script>
    layui.use('element', function () {
        var element = layui.element; //导航的hover效果、二级菜单等功能，需要依赖element模块

        //监听导航点击
        element.on('nav(demo)', function (elem) {
            //console.log(elem)
            layer.msg(elem.text());
        });
    });
</script>




<script>

    var userId = $.cookie('userId');
    $(function () {
        //静态数据置空
        $("#Reset3").empty();
        SelectFocus();
    });
    function SelectFocus() {
        $.ajax({
            url: "/user/getFocus",
            type: "get",
            dataType: "json",
            data: {
                userId: userId
            },
            //默认执行成功
            success: function (data) {
             //   alert("获取用户信息成功！");
                //控制台打印
                console.log(data.data);
                showFocus(data);
            },
            error: function(data){
              //  alert("获取用户信息失败！");
            }
        });

    }
    function showFocus(data) {
        //控制台打印
        console.log("第一次：" + data.data.length);
        //按格式从数据库取数据

        var appendhtml ="                  <div class=\"layui-col-md3\">\n" +
            "\n" +
            "                            <ul class=\"layui-nav layui-nav-tree layui-inline\" style=\"margin-right: 10px;\"\n" +
            "                                lay-filter=\"demo\">\n" +
            "                                <li class=\"layui-nav-item layui-nav-itemed\"><a href=\"focus.html\">我的关注<span class=\"layui-badge\">   "+data.data.length+"     </span></a></li>\n" +
            "                                <li class=\"layui-nav-item layui-nav-itemed\"><a href=\"fans.html\">我的粉丝</a></li>\n" +
            "                            </ul>\n" +
            "\n" +
            "                        </div>\n" +
            "\n" +
            "                        <div class=\"layui-col-md9\">\n" +
            "\n" +
            "\n" +
            "                            <div class=\"follow-header follow-header-info\">\n" +
            "                                <div class=\"breadcrumb clearfix\"><p class=\"item cur\">我的关注</p><!----></div><!----></div>\n" +
            "\n" +
            "\n" +
            "                            <div class=\"fav-main section\"></div>\n" +
            "\n" +
            "                            <div class=\"follow-content section\">\n" +
            "                                <div class=\"content\"  style=\"padding-bottom: 10px;\">                ";


        for(var i = 0; i < data.data.length; i++) {
            appendhtml +=
                "                                    <ul class=\"relation-list\">\n" +
                "                                       \n" +
                "                                        <li class=\"list-item clearfix\">\n" +
                "                                            <div class=\"content\">\n" +
                "                                                <img src=\"   " +  data.data[i].icon   +" \" class=\"layui-nav-img \" onclick=\"GetLook(this)\" value=\"    "+ data.data[i].id  +"\">" +
                "                                                <p style=\"font-size:20px\" > "+  data.data[i].userName +"</p>\n" +
                "                                            <button class=\"layui-btn layui-btn-disabled layui-btn-xs\" onclick=\"myFunction(this)\" id = \" " +  data.data[i].id +" \"  style=\"float:right\">已关注</button>\n" +
                "                                                <p class=\"desc\">"+ data.data[i].introduce  +"</p>\n" +
                "                                            </div>\n" +
                "                                        </li>\n"
        }

        appendhtml += "                                    </ul> "

        appendhtml +=  "   </div>\n" +
        "\n" +
        "                            </div>\n" +
        "\n" +
        "\n" +
        "                        </div>\n" +
        "                    </div>\n" +
        "\n" +
        "\n" +
        "                </div>\n" +
        "                "
        $("#Reset3").append(appendhtml);


    }


    function myFunction(obj){
        var focusid=obj.id;  //想取关的用户的id
        var json={"userId":focusid,"fansId":userId};
        $.ajax({
            type: "delete",
            url: "/focus/delFocus",
            contentType: 'application/json',
            data: JSON.stringify(json),
            success : function (data) {
                if (data.code==0){
                    sweetAlert("成功取关", "success");
                }else {
                    sweetAlert("出错了~~", "取关失败，请再次尝试~", "error");
                }
            }

        });
        parent.location.reload();
        parent.location.reload();
    }
    function GetLook(obj){
        var focusid= $(obj).attr("value")
        $.cookie('othersId',focusid);
        window.location.href = "ViewOthers.html";
    }



</script>
</body>
</html>

















