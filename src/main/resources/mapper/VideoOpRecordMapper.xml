<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.four.fvs.dao.VideoOpRecordDao">


    <sql id="base_sql">
      userId,
      recordId,
      type,
      opType,
      del,
    </sql>

    <insert id="addRecord" parameterType="com.four.fvs.model.VideoOpRecord">
      insert into videooprecord
      <trim prefix="(" suffix=")" suffixOverrides=",">
        <include refid="base_sql"></include>
      </trim>
      <trim prefix="values(" suffix=")" suffixOverrides=",">
          #{userId},
          #{recordId},
          #{type},
          #{opType},
          #{del},
      </trim>
    </insert>


    <update id="delRecord">
      update videooprecord set
      del=2
      where userId=#{userId} and recordId=#{recordId} and recordId=#{recordId} and opType=#{opType}
    </update>


    <select id="getRecord" resultType="com.four.fvs.model.VideoOpRecord">
        select * from videooprecord
        where userId=#{userId} and recordId=#{recordId} and recordId=#{recordId} and opType=#{opType} and del=1
    </select>
</mapper>